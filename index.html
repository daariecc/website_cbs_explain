<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SQL Injection Demo</title>
  <!-- Подключаем стили -->
  <link rel="stylesheet" href="style.css">
</head>
<body>
  
  <!-- Верхняя плашка (как на референсе), фиолетовая -->
  <header class="top-bar">
    <div class="top-bar__inner">
      <!-- Можно добавить логотип или название -->
      <h1 class="top-bar__title">Учебный пример: SQL Injection</h1>
    </div>
  </header>

  <!-- Навигация по шагам (закрепим слева) -->
  <div class="step-nav">
    <button class="step-btn active" data-step="input-screen">1</button>
    <button class="step-btn" data-step="normal-result">2</button>
    <button class="step-btn" data-step="injection-screen">3</button>
    <button class="step-btn" data-step="attack-result">4</button>
  </div>

  <!-- Основной контейнер -->
  <div class="container">

    <!-- Подзаголовок (под верхней плашкой) -->
    <div class="page-intro">
      <p>Рассмотрим, как работает SQL Injection на наглядном примере.</p>
    </div>

    <!-- Экран 1: Обычный ввод -->
    <div id="input-screen" class="card visible">
      <h2>Шаг 1: Обычный ввод</h2>
      <p>
        Допустим, у нас есть форма авторизации по имени пользователя. Разработчик не применил фильтрацию введённых данных.  
        Сначала введите обычное имя, например <em>john</em>.
      </p>
      <label class="label" for="usernameInput">Введите имя пользователя:</label>
      <input type="text" id="usernameInput" placeholder="например, john"/>
      <button id="loginBtn" class="action-btn">Войти</button>
      <p class="note">
        После этого мы покажем, что произойдёт при вредоносном вводе.
      </p>
    </div>

    <!-- Экран 2: Нормальный результат -->
    <div id="normal-result" class="card hidden">
      <h2>Шаг 2: Нормальный результат</h2>
      <p>Если пользователь "john" существует в базе, вы авторизуетесь без проблем.</p>
      <div class="info-box info-normal">
        <strong>Результат:</strong><br>
        Добро пожаловать, john!
      </div>
      <div class="info-box info-warning" style="margin-top:1.5rem;">
        <strong>Что произошло без инъекции:</strong><br>
        Запрос к базе данных был:
        <div class="code-sample">
          SELECT * FROM users WHERE username='john'
        </div>
        Здесь всё выглядит безопасно, так как пользовательский ввод "john" не меняет логику запроса.
      </div>
      <button id="showAttackBtn" class="action-btn">Перейти к вредоносному вводу</button>
    </div>

    <!-- Экран 3: Ввод вредоносного кода -->
    <div id="injection-screen" class="card hidden">
      <h2>Шаг 3: Вредоносный ввод</h2>
      <p>Злоумышленник вводит не просто имя, а SQL-код:</p>
      <div class="code-sample">
        john' OR '1'='1
      </div>
      <input type="text" id="evilInput" value="john' OR '1'='1"/>
      <button id="attackBtn" class="action-btn">Войти</button>
      <p class="note">
        Нажмите "Войти", чтобы увидеть последствия.
      </p>
    </div>

    <!-- Экран 4: Результат SQL Injection -->
    <div id="attack-result" class="card hidden">
      <h2>Шаг 4: Результат SQL Injection</h2>
      <div class="info-box info-critical">
        <strong>Критическая ситуация:</strong><br>
        Злоумышленник изменил логику запроса так, что теперь он выглядит следующим образом:
        <div class="code-sample">
          SELECT * FROM users WHERE username='john' OR '1'='1'
        </div>
        Введённый код добавил условие '1'='1', которое всегда истинно.  
        Это означает, что запрос вернёт все записи из базы, а не только для конкретного пользователя.
      </div>
      <div class="info-box info-solution" style="margin-top:1.5rem;">
        <strong>Решение:</strong><br>
        Чтобы избежать подобных ситуаций, нужно использовать параметризованные запросы, ORM-библиотеки или фильтрацию ввода,  
        чтобы данные пользователя не могли менять структуру SQL-запроса.
      </div>
    </div>

  </div> <!-- /container -->

  <!-- Подключаем JS-логику -->
  <script src="script.js"></script>
</body>
</html>
